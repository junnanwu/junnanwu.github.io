# 定时任务

## corn表达式

Seconds Minutes Hours DayofMonth Month DayofWeek

**注意：Spring的@Scheduled注解中的`cron`仅支持6个域的表达式，也就是不能设定年，如果超过六个则会报错。**



| 字段                   | 允许值                                 | 允许的特殊字符             |
| ---------------------- | -------------------------------------- | -------------------------- |
| 秒（Seconds）          | 0~59的整数                             | , - * /   四个字符         |
| 分（Minutes）          | 0~59的整数                             | , - * /   四个字符         |
| 小时（Hours）          | 0~23的整数                             | , - * /   四个字符         |
| 日期（DayofMonth）     | 1~31的整数（但是你需要考虑你月的天数） | ,- * ? / L W C   八个字符  |
| 月份（Month）          | 1~12的整数或者 JAN-DEC                 | , - * /   四个字符         |
| 星期（DayofWeek）      | 1~7的整数或者 SUN-SAT （1=SUN）        | , - * ? / L C #   八个字符 |
| 年(可选，留空)（Year） | 1970~2099                              | , - * /   四个字符         |

每一个域都使用数字，但还可以出现如下特殊字符，它们的含义是：

- `*`：表示匹配该域的任意值。假如在Minutes域使用*, 即表示每分钟都会触发事件。

- `?`：只能用在DayofMonth和DayofWeek两个域。这两个域是互斥的，所以需要将其中的一个设置为`?`

- `-`：表示范围。例如在Minutes域使用`5-20`，表示从5分到20分钟每分钟触发一次。

- `/`：表示起始时间开始触发，然后每隔固定时间触发一次。例如在Minutes域使用`5/20`,则意味着5分钟触发一次，而25，45等分别触发一次。

- `,`：表示列出枚举值。例如：在Minutes域使用`5,20`，则意味着在5和20分每分钟触发一次。

- `L`：表示最后(last)，只能出现在DayofWeek和DayofMonth域。如果在DayofWeek域使用5L,意味着在最后的一个星期四触发。

- `W`：表示有效工作日(周一到周五),只能出现在DayofMonth域，系统将在离指定日期的最近的有效工作日触发事件。

  例如：在 DayofMonth使用`5W`，如果5日是星期六，则将在最近的工作日：星期五，即4日触发。如果5日是星期天，则在6日(周一)触发；如果5日在星期一到星期五中的一天，则就在5日触发。另外一点，W的最近寻找不会跨过月份。

- `LW`：这两个字符可以连用，表示在某个月最后一个工作日，即最后一个星期五。

- `#`：用于确定每个月第几个星期几，只能出现在DayofMonth域。例如在4#2，表示某月的第二个星期三。

### 常用表达式

- 在每年的5/12号23点9分执行

  `0 9 23 12 5 ?`

- 每天每个小时的开始执行

  `0 0 * * * *`

- 每十秒执行一次

  `*/10 * * * * *`

- 每天凌晨两点执行

  `0 0 2 * * ?`

