# 正则表达式

正则表达式（regular expression，简称RegEx）可以在几乎所有语言和平台上执行各种复杂的文本处理和操作。

在正则表达式中，常用**模式**表示实际的正则表达式，在正则表达式的字符串中，由普通文本和特殊字符构成。

本文参考《正则表达式必知必会》。

**特殊字符**

| 字符    | 含义                                               |
| ------- | -------------------------------------------------- |
| `.`     | 匹配一个字符                                       |
| `[]`    | 定义集合，必须匹配其中的某个成员                   |
| `-`     | 定义字符区间                                       |
| `^`     | 在中括号中出现，表示排除                           |
| `\d`    | 任何**一个**数字字符，等价于`[0-9]`                |
| `\D`    | 任何**一个**非数字字符，等价于`[^0-9]`             |
| `\w`    | 任何一个字母数字类型或下划线，等价于`[a-zA-Z0-9_]` |
| `\W`    | 任何一个非字符数字或下划线，等价于`[^a-zA-Z0-9_]`  |
| `\s`    | 任何一个空白字符，等价于`[\f\n\r\t\v]`             |
| `\S`    | 任何一个非空白字符，等价于`[^\f\n\r\t\v]`          |
| `+`     | 匹配某个字符或字符集合1次或多次重复                |
| `*`     | 匹配某个字符或字符集合0次或多次重复                |
| `?`     | 匹配某个字符或字符集合0次或1次重复                 |
| `{}`    | 重复匹配                                           |
| `\b`    | 单词边界，匹配一个单词的开始或结尾                 |
| `\B`    | 非单词边界                                         |
| **`^`** | 在非中括号中出现，字符串边开头                     |
| **`$`** | 字符串结尾                                         |

- `[]`

  匹配多个字符串中的一个，在使用`[]`定义的集合里，必须匹配其中的某个成员，注意集合里面不区分大小写。

- `-`

  为了简化字符区间的定义，用`-`来定义字符区间

  **注意：**

  - `A-z`会包含`[`和`^`等排在`Z`和`a`之间的字符
  - 字符区间里面可以是ASCII里面的任意字符，但是实际上，最常用的还是数字字符区间和字母区间。
  - `-`只有出现在`[]`中的时候才是元字符。在字符集合以外的地方，`-`只是一个普通字符，所以不需要转义

  **举例：**

  - 匹配任何一个字母或数字

    `[A-Za-z0-9]`

    是下面字符集合的简写形式

    `[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234556789]`

- `^`

  字符集合`[]`用来指定一组必须匹配其中之一的字符，但有时候，我们需要反过来做，指定一些不需要匹配的字符

  注意：

  - `^`的作用域是给定字符集合里的所有字符，而不是后面的一个

  例如：

  - 匹配任何不是数字的字符

    `[^0-9]`

- `+`

  举例：

  - 匹配电子邮件地址初版

    `\w+@\w+\.\w+`

    上面的表达是匹配出了形如`xxx@xxx.xxx`形式的邮件地址，但是`xxx@xxx.xxx.xxx`这种形式的却无法匹配上了，因为`\w`并不包括`.`

  - 匹配电子邮件地址升级版

    `\w+@[\w.]+\.\w+`

    注意：

    一般来说，在字符集合里面，像`.`、`+`这样的元字符将被解释为普通字符，不需要转义，但是转义了也可以

- `*`

  `+`匹配一个或多个字符，但是不匹配0个字符，如果你想匹配一个可有可无的字符，可以用`*`来代替`+`

  举例：

  - 匹配电子邮件地址升级版

    `\w+[\w.]*@[\w.]+\.\w+`

    `\w+`匹配任意单个数字字母字符，但是不包括`.`，可以看作是电子邮件的起始的有效字符

    经过开头的若干个字符之后，也许会出现一个`.`和其他额外的字符，也过也可能没有

- `?`

  举例：

  - 同时匹配`http`和`https`URL地址

    `https?:\/\/[\w.\/]+`

  - 同时匹配Windows和Unix的换行符

    `[\r]?\n[\r]?\n`

- `{}`

  - 可以是固定的次数

  - 可以是范围

    `{2,4}`表示最少重复2次，最多重复4次

    举例：

    筛选日期格式

    `\d{1,2}[-\/]\d{1,2}[-\/]\d{2,4}`

    结果：`4/8/17`、`10-6-2018`、`01-01-01`

    但是不包括`2/2/2`

  - 至少重复多少次

    `3,`表示至少重复3次

- `\b`

  举例：

  - 匹配任何以字符序列cap开头的单词

    `\bcap`

  - 匹配前后都有空格的连字符

    `\B-\B`
